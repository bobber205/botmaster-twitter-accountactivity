const affected_users = [{screen_name: 'West_Coast_Jack',	social_user_id: '224486804'},
{screen_name: 'squall126',	social_user_id: '23170905'},
{screen_name: 'mthsmith',	social_user_id: '119078164'},
{screen_name: 'sheenaniganz',	social_user_id: '19682030'},
{screen_name: 'TRLovesEmotion',	social_user_id: '1003719630542856192'},
{screen_name: 'darickdang',	social_user_id: '44080327'},
{screen_name: 'OfficiallyMadii',	social_user_id: '1608958620'},
{screen_name: 'naovni',	social_user_id: '828409999713918976'},
{screen_name: 'tinopkk',	social_user_id: '76321980'},
{screen_name: 'JingWait',	social_user_id: '1375079370'},
{screen_name: 'CurlProfessor',	social_user_id: '584211054'},
{screen_name: 'endygee1',	social_user_id: '1001912446104358913'},
{screen_name: 'nigbythirty',	social_user_id: '599705796'},
{screen_name: 'tylercj1998',	social_user_id: '286947553'},
{screen_name: 'Rebecca46977005',	social_user_id: '1000904336078188544'},
{screen_name: 'LRC88',	social_user_id: '68472562'},
{screen_name: 'kmonte1313',	social_user_id: '2352565082'},
{screen_name: 'thefinessecyd',	social_user_id: '3631312572'},
{screen_name: 'sadie_2016',	social_user_id: '2274116684'},
{screen_name: 'midnightminxx',	social_user_id: '835991938658516992'},
{screen_name: 'Dads_AndDollars',	social_user_id: '2548764050'},
{screen_name: 'lilwateranimals',	social_user_id: '1107196232'},
{screen_name: 'bryanstratton',	social_user_id: '65945057'},
{screen_name: 'colemanhall',	social_user_id: '29684493'},
{screen_name: 'Coohps',	social_user_id: '26586270'},
{screen_name: 'collifornia',	social_user_id: '74812041'},
{screen_name: 'Luciousness12',	social_user_id: '2778989013'},
{screen_name: 'ChristineMMoran',	social_user_id: '175531639'},
{screen_name: 'MKTwits',	social_user_id: '60146088'},
{screen_name: 'evega999',	social_user_id: '4848180556'},
{screen_name: 'GluxEO',	social_user_id: '2691317200'},
{screen_name: 'srhash',	social_user_id: '28752977'},
{screen_name: 'Ellelinas',	social_user_id: '842575767716352000'},
{screen_name: 'RickinBaltimore',	social_user_id: '916670265697947648'},
{screen_name: 'Riot_Graphics',	social_user_id: '4912652085'},
{screen_name: 'Jagged62',	social_user_id: '961367141927792644'},
{screen_name: 'JustinHOlson',	social_user_id: '467089559'},
{screen_name: 'AllLuckXBL',	social_user_id: '876211405023784961'},
{screen_name: '_matts1',	social_user_id: '1386080160'},
{screen_name: 'AyJaySimon',	social_user_id: '1013957846'},
{screen_name: 'Ghh90274080',	social_user_id: '926928665912295424'},
{screen_name: 'KristenWoodfine',	social_user_id: '465004104'},
{screen_name: 'mauisage',	social_user_id: '28307821'},
{screen_name: 'KateGladstone',	social_user_id: '45171384'},
{screen_name: 'Rager65',	social_user_id: '42834024'},
{screen_name: 'chemosh933',	social_user_id: '745864454047399936'},
{screen_name: 'shirokambocha',	social_user_id: '906966862335967233'},
{screen_name: 'eg9413',	social_user_id: '618804701'},
{screen_name: 'qooprmusic',	social_user_id: '808054502397972480'},
{screen_name: 'T_M_W_N_N',	social_user_id: '1382712846'},
{screen_name: 'LCraiggie',	social_user_id: '36492706'},
{screen_name: 'ChrisTeso',	social_user_id: '19081905'},
{screen_name: 'xrad_sprklz',	social_user_id: '18418530'},
{screen_name: 'MonalisaClement',	social_user_id: '321482928'},
{screen_name: 'talkinaway',	social_user_id: '125453666'},
{screen_name: 'MetalMama1987',	social_user_id: '3115949130'},
{screen_name: 'linleydavis',	social_user_id: '156484444'},
{screen_name: 'BringBackDobie',	social_user_id: '1003717069953626112'},
{screen_name: 'boiyoio',	social_user_id: '2152871464'},
{screen_name: 'PasqualWisdom',	social_user_id: '38608140'},
{screen_name: 'RebeccaBertone',	social_user_id: '519840141'},
{screen_name: 'flutiefan',	social_user_id: '14827851'},
{screen_name: 'TeenyWhale',	social_user_id: '717428563046187008'},
{screen_name: 'goofyje5',	social_user_id: '4311516165'},
{screen_name: 'Pinkieruth',	social_user_id: '2508400742'},
{screen_name: 'bobber205',	social_user_id: '15588742'},
{screen_name: 'ScottyCCa',	social_user_id: '2541038459'},
{screen_name: 'WavesofBo',	social_user_id: '156842663'},
{screen_name: 'gamereric21life',	social_user_id: '838180972348727297'},
{screen_name: 'i_love_shibas',	social_user_id: '953007403456491520'},
{screen_name: 'Carpboy823',	social_user_id: '18142845'},
{screen_name: 'UserZero2',	social_user_id: '999738944312004609'},
{screen_name: 'GreenliefWV',	social_user_id: '4856077504'},
{screen_name: 'tenhofomecrl',	social_user_id: '1847341616'},
{screen_name: 'Najeeboo_',	social_user_id: '3054463529'},
{screen_name: 'Metaldad1987',	social_user_id: '989924532185194496'},
{screen_name: 'pammydiane',	social_user_id: '157007629'},
{screen_name: 'memeburly',	social_user_id: '771714260758097920'},
{screen_name: 'silversupastar',	social_user_id: '42472477'},
{screen_name: 'MercifulPie',	social_user_id: '2838370517'},
{screen_name: 'the_georgie_b',	social_user_id: '797493798511276032'},
{screen_name: 'nessiesens',	social_user_id: '32911334'},
{screen_name: 'edwardjpowers',	social_user_id: '253969408'},
{screen_name: 'puppydogfacelov',	social_user_id: '244456278'},
{screen_name: 'MeshaBtw',	social_user_id: '39253002'},
{screen_name: 'mlamp13',	social_user_id: '616547066'},
{screen_name: 'kennacollett',	social_user_id: '740257436037091329'},
{screen_name: 'HQPertPupkin',	social_user_id: '828028704051847168'},
{screen_name: 'ppetrov67',	social_user_id: '902900665906810882'},
{screen_name: 'TimSandor',	social_user_id: '152321593'},
{screen_name: 'KingAmongDorks',	social_user_id: '15804589'},
{screen_name: 'LitterickB',	social_user_id: '979053160785301505'},
{screen_name: 'leightonrodney',	social_user_id: '301884279'},
{screen_name: 'ThatOllieWhoDie',	social_user_id: '483492986'},
{screen_name: 'TrevorShrake',	social_user_id: '2905339644'},
{screen_name: 'KikoCrystalBall',	social_user_id: '381760905'},
{screen_name: '500words',	social_user_id: '20408100'},
{screen_name: 'WillRidley9',	social_user_id: '820400083015450625'},
{screen_name: 'apeca07',	social_user_id: '750537063238365186'},
{screen_name: 'MauTV_OFICIAL',	social_user_id: '912380831678717954'},
{screen_name: 'Matt_Vee123',	social_user_id: '2326534914'},
{screen_name: 'vivisoddeye',	social_user_id: '3124030153'},
{screen_name: 'Katrizzl3',	social_user_id: '3386785114'},
{screen_name: 'kbourgeois79',	social_user_id: '844962781'},
{screen_name: 'brewster2918',	social_user_id: '82457629'},
{screen_name: 'sh_ntel',	social_user_id: '100655506'},
{screen_name: 'DanThirlby',	social_user_id: '1668686767'},
{screen_name: 'Iamblesssheree',	social_user_id: '915015088989523968'},
{screen_name: 'hyeperr',	social_user_id: '717163124206411776'},
{screen_name: 'ColeenVolk1',	social_user_id: '2333874056'},
{screen_name: 'iamadelaineeeee',	social_user_id: '988751237024661504'},
{screen_name: 'surfblonde2002',	social_user_id: '32417129'},
{screen_name: 'MagdaMostafa8',	social_user_id: '144512010'},
{screen_name: 'shelleyohmes',	social_user_id: '30382639'},
{screen_name: 'Dhanush74702690',	social_user_id: '2568936500'},
{screen_name: 'christyallison',	social_user_id: '24788848'},
{screen_name: 'anteatertoo',	social_user_id: '136773342'},
{screen_name: 'IamShiva2001',	social_user_id: '801108253623091200'},
{screen_name: 'squidvicious',	social_user_id: '9392622'},
{screen_name: 'BRGives',	social_user_id: '890602593432547329'},
{screen_name: 'TinkerMazell',	social_user_id: '35233977'},
{screen_name: 'Johnny_Arcade',	social_user_id: '14401106'},
{screen_name: 'Gatekeeper200',	social_user_id: '971714962166042624'},
{screen_name: 'thephantomvaper',	social_user_id: '486131127'},
{screen_name: 'TjM194',	social_user_id: '740643068546813953'}];

// const affected_users = [
//     {
//         screen_name: 'bobber205',
//         social_user_id: '15588742'
//     },
//     {
//         screen_name: 'ChrisTeso',
//         social_user_id: '19081905'
//     },
// ];

console.log(`Sending messages to ${affected_users.length} peeps`);


const redis = require('redis');
const redisClient = redis.createClient(process.env.REDIS_URL_FULL);
const configHelpers = require('../../lib/helpers/configHelper');
const Twit = require("twit");




var handle = 'iqtrivia';
var config = configHelpers.getTwitterConfigurationObjectForHandle(handle);
var twitCredentials = {
    consumer_key: config.twitter_consumer_key,
    consumer_secret: config.twitter_consumer_secret,
    access_token: config.twitter_bot_access_token,
    access_token_secret: config.twitter_bot_access_token_secret,
};
var twitter_client = new Twit(twitCredentials);

console.log(twitter_client);

affected_users.forEach((user_object) => {
    console.log(`Sending message to ${user_object.screen_name}`);
    var message_text = "Popping in here to let you know that we've given you an extra life for tomorrow's game due to today's Twitter glitches.\n\nHope to see you tomorrow!";
    let dm_payload = {
        event: {
            type: 'message_create',
            message_create: {
                target: {
                    recipient_id: `${user_object.social_user_id}`
                },
                message_data: {
                    text: message_text
                }
            }
        }
    };
    console.log(dm_payload);
    twitter_client.post('direct_messages/events/new', dm_payload, (response) => {
        console.log("DM RESPONSE", response);
    });
   

});
